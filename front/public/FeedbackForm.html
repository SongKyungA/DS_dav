<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Expiration Date Management Board</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f4f4f4;
            height: 100%;
        }
        .container {
            width: 100%;
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .feedback-form {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .form-label {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .form-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        .submit-button {
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        .submit-button:hover {
            background-color: #0056b3;
        }
        .feedback-item {
            margin-top: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .feedback-item strong {
            font-size: 1.2em;
        }
        .popup {
            position: absolute;
            top: 0;
            right: 20px;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        /* 추가된 CSS 스타일 */
        .feedback-table-container {
            margin-top: 30px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }
        #feedback-table {
            width: 100%;
            border-collapse: collapse;
        }
        #feedback-table th,
        #feedback-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        #feedback-table th {
            background-color: #f7f7f7;
            font-weight: bold;
        }
        #feedback-table tbody tr:hover {
            background-color: #f0f0f0;
        }
    </style>
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <!-- DataTables Buttons CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.1.2/css/buttons.dataTables.min.css">
</head>
<body>
    <div class="container">
        <div class="feedback-form">
            <h2 style="margin-bottom: 20px;">피드백 제출</h2>
            <label class="form-label" for="title">제목</label>
            <input type="text" id="title" class="form-input" placeholder="제목" />
            <label class="form-label" for="foodCategory">음식 분류</label>
            <input type="text" id="foodCategory" class="form-input" placeholder="음식 분류" />
            <label class="form-label" for="currentExpiry">현재 유통 기한 (일)</label>
            <input type="number" id="currentExpiry" class="form-input" placeholder="현재 유통 기한 (일)" min="1" />
            <label class="form-label" for="suggestedExpiry">제안하는 유통 기한 단축 (일)</label>
            <input type="number" id="suggestedExpiry" class="form-input" placeholder="제안하는 유통 기한 단축 (일)" min="1" />
            <label class="form-label" for="reason">개선 사유</label>
            <input type="text" id="reason" class="form-input" placeholder="개선 사유" />
            <label class="form-label" for="comments">추가 코멘트</label>
            <textarea id="comments" class="form-input" placeholder="추가 코멘트"></textarea>
            <button class="submit-button" onclick="submitFeedback()">피드백 제출</button>
        </div>

        <div class="feedback-table-container">
            <!-- 제출된 피드백이 여기에 나타납니다 -->
            <h2>피드백 목록</h2>
            <table id="feedback-table" class="display">
                <thead>
                    <tr>
                        <th>제목</th>
                        <th>음식 분류</th>
                        <th>현재 유통 기한</th>
                        <th>제안하는 유통 기한</th>
                        <th>개선 사유</th>
                        <th>추가 코멘트</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 피드백 아이템이 여기에 추가됩니다 -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

    <!-- DataTables Buttons JS -->
    <script src="https://cdn.datatables.net/buttons/2.1.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.2/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>

    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <script>
        var table; // DataTable 객체를 저장하기 위한 전역 변수

        function submitFeedback() {
            var feedback = {
                title: document.getElementById('title').value,
                foodCategory: document.getElementById('foodCategory').value,
                currentExpiry: document.getElementById('currentExpiry').value,
                suggestedExpiry: document.getElementById('suggestedExpiry').value,
                reason: document.getElementById('reason').value,
                comments: document.getElementById('comments').value
            };

            addToTable(feedback);

            // Clear the form fields
            document.getElementById('title').value = '';
            document.getElementById('foodCategory').value = '';
            document.getElementById('currentExpiry').value = '';
            document.getElementById('suggestedExpiry').value = '';
            document.getElementById('reason').value = '';
            document.getElementById('comments').value = '';

            // Show submission message as a popup for a few seconds
            var popup = document.createElement('div');
            popup.className = 'popup';
            popup.innerText = '피드백이 제출되었습니다. 아래 목록을 확인해주세요.';
            document.body.appendChild(popup);
            setTimeout(function() {
                document.body.removeChild(popup);
            }, 3000);
        }

        function addToTable(feedback) {
            table.row.add([
                feedback.title,
                feedback.foodCategory,
                feedback.currentExpiry + '일',
                feedback.suggestedExpiry + '일',
                feedback.reason,
                feedback.comments
            ]).draw(false);
        }

        $(document).ready(function() {
            // DataTables 초기화
            table = $('#feedback-table').DataTable({
                dom: 'Bfrtip', // 버튼 영역 추가
                buttons: [ // 버튼 설정
                    'pdfHtml5' // PDF 다운로드 버튼만 표시
                ]
            });
        });
    </script>
</body>
</html>